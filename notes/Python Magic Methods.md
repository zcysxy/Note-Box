# Python Magic Methods

[[Python]] | [[Python Classes]]

---

Python 中有很多特殊方法 magic methods, 它们是**类**中预先定义好的并且已经被决定了在何时何处被调用. 它们统一的名字形式是 `__name__`, 如[`__init__`](#init-function). 又比如计算 `1 + 1` 时, python 就调用了 int 类中的 `__add__` 方法.

在[[Python Statements - Class|自定义类]]中重写特殊函数称为**重载**, 这样可以修改任意功能. 下列出部分特殊方法.

| Magic Method | When it gets invoked (example) | Explanation |
| --- | --- | --- |
| `__new__()` | `inst = Class()` | 确定是否创建实例. 静态方法 |
| `__init__()` | `inst = Class()` | 构造方法, 初始化实例 |
| `__end__()` | `del inst` | 析构方法, 释放对象 |
| `__add__()` | `1 + 1` | `+` |
| `__sub__()` | `1 - 1` | `-` |
| `__mul__()` | `1 * 1` | `*` |
| `__truediv__()` | `1 / 1` | `/` |
| `__floordiv__()` | `1 // 1` | `//` |
| `__pow__()` | `1 ** 1` | `**` |
| `__mod__()` | `1 % 1` | `%` |
| `__cmp__()` | `x == y`, `x > y`, etc. | 比较运算 |
| `__pos__()` | `+x` | Unary plus sign |
| `__neg__()` | `-x` | Unary minus sign |
| `__repr__()` | `print(x)` | 打印, 转换 |
| `__index__()` | `x[i]` | 转换为索引 |
| `__getitem__()` | `x[i]` | 根据索引获取值 |
| `__setitem__()` | `x[i] = y` | 根据索引赋值 |
| `__delitem__()` | `del x[i]` | 根据索引删除元素 |
| `__iter__()` | `for x in range(10)` | 迭代 |
| `__contains__()` | `x in X`, `x not in X` | `in` |
| `__call__()` | `f(x)` | 调用函数 |
| `__enter__()` | `with f as x:` | *with* statement |

[//begin]: # "Autogenerated link references for markdown compatibility"
[Python]: Python "Python"
[Python Classes]: Python Classes "Python Classes"
[//end]: # "Autogenerated link references"