# Python Typing - Iterables

# 可迭代对象

[[Python Types]]

## Basics

* Python 中可迭代对象即可进行 **[[Python Statements - for|for]] 循环遍历**的对象
    * Iterable 的遍历过程即称为 **==Iteration==**
* 序列(包括字典, 集合)都是可迭代对象, 但非可迭代对象都是序列
* 可迭代对象只能遍历一次, 之后对象为空
    * 如

        ```python
        >>> r = reversed([1,2,3,4,5])
        >>> print(list(r))
        [5,4,3,2,1]
        >>> print(list(r))
        []
        ```

## Iterator

* Python 中 *for* 循环不用 index, 而用 **迭代器/迭代对象 interators**
* > Iterators are the things that power iterables. You can get an iterator from any iterable. And you can use an iterator to manually loop over the iterable it came from[^1]
* Iterators are **stateful**, 一旦遍历过则消失
* ==Iterators 本身也是 iterables==
    * > An iterable is something you're able to iterate over.  
        > An iterator is the agent that actually does the iterating over an iterable[^2]
    * 但 iterators 没有一般 iterables 那么多性质和那么高可操作性

## 相关函数

* [[Python Functions - iter|iter]] 将可迭代对象 iterable 返回为迭代器 iterator
* [[Python Functions - next|next]] 返回迭代器 iterator 的下一个元素
    * 若无下一个元素则报错
    * `next` 函数是 iterators 唯一支持的操作

/! Iterable & Iterator 判别

* Anything that can be passed to `iter` without a `TypeError` is an iterable
* Anything that can be passed to `next` without a `TypeError` is an iterator
* Anything that returns itself when passed to `iter` is an iterator

!/

[^1]: [Loop better: A deeper look at iteration in Python](https://opensource.com/article/18/3/loop-better-deeper-look-iteration-python#:~:text=Sequences%20are%20a%20very%20common,and%20strings%20are%20all%20sequences.&text=Sequences%20are%20iterables%20that%20have%20a%20specific%20set%20of%20features.&text=So%20anything%20that%20can%20be,kinds%20of%20iterables%20as%20well.)
[^2]: 同注 1

[//begin]: # "Autogenerated link references for markdown compatibility"
[Python Types]: Python Types "Python Types"
[//end]: # "Autogenerated link references"