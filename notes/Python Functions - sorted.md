# Python Functions - sorted

[[Python Functions]]

* 对序列进行排序并**返回新列表**
    * 如可以由一个元组生成一个新列表
* 可选参数: **reverse**
    * `sorted(s, [reverse=True|False])`
    * 默认为 *True*, 表示升序; *False* 表示降序
* 可选参数: **key**
    * 提供排序的 "自定义规则"

## itemgetter

* 常见的使用 *key* 属性进行排序的一种方法是利用模块 [[Python Modules - operator|operator]] 中的 `itemgetter` 函数
* 此方法自然可以对有序对象进行排序, 还可以对满足一定条件的无序[[Python Types - Iterable|可迭代对象]]进行排序
* 语法: `sorted(iterable, key = itemgetter(index_1,..., index_n))`
    * 其中 *iterable* 中的元素需为可排序**序列** (如列表, 元组, 字符串) 或者字典
        * 它们的共同之处就是可以用 "下标" 访问其中元素
    * 返回列表先对各序列 "下标" 为 *index_1* 的元素进行排序. 当几个序列的 "下标" 为 *index_1* 的元素序相同时, 对它们的 "下标" 为 *index_2* 的元素进行排序. 递推得到排序规则
    * "下标" *index_i* 可为序列元素的下标, 也可为**字典的键**
        * "下标" 为序列元素下标(整数值)时, 需要 *iterable* 的各元素序列长度大于等于 $(\max_{1\leqslant i\leqslant n}index\_i+1)$; 且对任意 $1\leqslant i\leqslant n-1$, 所有下标为 *index_1*,...,*index_i* 的元素的序都相同的序列的下标为 *index_{i+1}* 的元素之间可以排序
        * "下标" 为字典键时, 需要各字典都含键 *index_1*, 且各 *index_1* 对应的值之间可以排序; 且对任意 $1\leqslant i\leqslant n-1$, 所有键 *index_1*,...,*index_i* 对应的值的序都相同的字典的键为 *index_{i+1}* 对应的值之间可以排序
    * 所以并不要求所有序列的对应 "下标" 的元素之间都能排序, 只要**保证排序过程能进行下去**即可
    * 规则可能仍不能使所有元素之间都可以排序, 故返回列表可能只是满足 *key* 的规则, 而不是**由它决定**

### Example 1 元素为列表自定义排序

对一个人的成绩单进行一定规则的排序

```py
# transcription ranking

from operator import itemgetter

tc = [
    ['1_math', 70, 'B'],
    ['2_chinese', 90, 'A'],
    ['3_english', 80, 'A'],
    ['4_physics', 80, 'A'],
    ['5_chemistry', 70, 'A'],
    ['6_biology', 60, 'C'],
    ['7_politics', 50, 'C']
]
# 其中科目, 等级都需要按照升序, 但分数要按照降序
# 所以可以先行成分数为相反数的中间列表
for i in range(len(tc)):
    tc[i][1] = -tc[i][1]
# 按照先等级, 后分数, 最后科目的层级进行排序
tc = sorted(tc, key=itemgetter(2,1,0))
# 将负分数变为正常分数
for i in range(len(tc)):
    tc[i][1] = -tc[i][1]

print(tc)
```

### Example 2 元素为字典自定义排序

对玩家游戏结果进行排序

```Python
# game result
from operator import itemgetter

gr = [
    {'name':'Bob', 'wins':10, 'losses':3, 'rating':75.0},
    {'name':'David', 'wins':4, 'losses':5, 'rating':60.0},
    {'name':'Carol', 'wins':4, 'losses':5, 'rating':57.0},
    {'name':'Patty', 'wins':9, 'losses':3, 'rating':72.8}
]

gr = sorted(gr, reverse=True, key = itemgetter('wins', 'rating')) # 按照先 wins 后 rating 进行排序

print(gr)
```

### Example 3 字典排序

!! 注意上面的语法要求的是要排序的可迭代对象的元素可为字典, 而一般字典无法直接通过上述语法进行排序

可利用字典方法 `dict.items()` 将字典的键值对转化为元组然后进行排序

```py
# item price ranking
from operator import itemgetter

price = {'apple':8000, 'HW':6000, 'XM': 4000}
rank = sorted(price.items(), reverse=True, key=itemgetter(1)) # 按价格从高到低排列
print(rank)
```

[//begin]: # "Autogenerated link references for markdown compatibility"
[Python Functions]: Python Functions "Python Functions"
[//end]: # "Autogenerated link references"