# Python Statements - for

[[Python Statements]] | [[Python Loops]] | [[Python Keywords]]

---

# for 循环

!! Python 中的 for 循环不像其他语言有 "index initializing, bounds checking, and index incrementing", 而是一种 "for each" 循环(index-free)

## 语法

```python
for x in squence # squence 可以是序列或可迭代对象
    loop block
```

或者与 [[Python Statements - else|else]] 结合:

```py
for x in squence # squence 可以是序列或可迭代对象
    loop block
else:
    block
```

^2ff17e

!! 这里的 *else* 结构是在循环**自然结束** (即表达式不再成立而非 [[Python Statements - break|break]] 而结束) 后才执行的

## 结构

语法 `for x in sequence` 的结构:

![20201105145601](https://raw.githubusercontent.com/zcysxy/Figurebed/master/img/20201105145601.png)

<!--
```flow
s=>start: start
e=>end: end
ini=>operation: index = 0
condex=>condition: index < len(sequence)
x=>operation: x = sequence[index]
block=>subroutine: loop block
update=>operation: index = index + 1

s->ini->condex
condex(no)->e
condex(yes)->x->block->update->condex
```
-->

* %index% 表示内部隐含变量, 灰蓝色框表示内部隐含操作
* 每次比较时都是**重新计算** *len(sequence)*
* %x% 称为==循环变量==可以是任意合法变量名

## 注意

* 虽然 `for item in x` 的语法似乎是**无序**循环, 但实际上若循环过程中 %x% 中元素改变循环也很可能跳过一些其他元素, 所以一般 *for* 循环中**不删除元素**
    * 例如:

        ```py
        >>> y = [10,20,30,40,50,60,70]
        >>> for x in y:
        ...     print(x)
        ...     y.remove(x)
        ...
        10
        30
        50
        70
        ```

* `for item in x` 中的循环变量 *item* 每轮循环开始会**自动更新**, 所以在 *loop block* 中改变 *index* 的值不会影响下一次循环
* *for* 循环跟 *[[Python Statements - while|while]]* 循环的主要区别在于, *for* 内部有**隐含的[[Python Types - Iterable#Iterator|迭代器]]进行迭代更新**, 即相当于隐含有 `index = index + 1` 操作, 而 [[Python Statements - while|while]] 循环需要手动更新迭代
* *for* 循环中的[[Python Types - Iterable#Iterator|迭代器]]或 *index* 理论上可以按任何顺序更新, 如 `for i in range(10,0,-1)` 即递减更新

## 简单 for 循环

*for* 循环不一定需要循环语句块, 也可以在单行内执行, 如[[List Comprehension|列表推导式]]中的 *for* 循环

## 实例

### 谁做了好事?

四个人中有一人做了好事, 已知有三个人说了真话, 根据下面对话判断是谁做的好事.
> A 说: 不是我  
> B 说: 是 C  
> C 说: 是 D  
> D 说: C 胡说

运用列表生成器内的 *for* 循环:

```py
ans = [
    person for person in ['A','B','C','D']\
    if (person != 'A') + (person == 'C') + (person == 'D') + (person != 'D') == 3
]
```

[//begin]: # "Autogenerated link references for markdown compatibility"
[Python Statements]: Python Statements "Python Statements"
[Python Loops]: Python Loops "Python Loops"
[Python Keywords]: Python Keywords "Python Keywords"
[//end]: # "Autogenerated link references"