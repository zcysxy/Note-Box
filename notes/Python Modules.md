# Python Modules

# 模块

[[Python]]

---

++ ⭐ 一个 Python 源文件就是一个模块 Module

- Python 默认安装仅包含部分基本或核心模块, 但用户可以安装大量的扩展模块, **pip** 是管理模块的重要工具
- 为减小运行的压力, 在 Python 启动时, 仅加载了很少的一部分模块, 在需要时由程序员显式地加载 import (可能需要先安装)其他模块, 加载后在程序中才能使用
    - ![20200924162049](https://raw.githubusercontent.com/zcysxy/Figurebed/master/img/20200924162049.png)
- 可以使用 sys.modules.items()显示所有预加载模块的相关信息. 需要先 import sys

## Basic Modules

* [[Python Modules - re|re]]
* [[Python Modules - os|os]]
    * [[Python Modules - os.path|os.path]]
* [[NumPy]]
* [[Matplotlib]]
* [[Tkinter]]
* [[Python Modules - turtle|turtle]]
* [[Python Modules - time|time]]
* [[Python Modules - sys|sys]]
* [[Python Modules - functools|functools]]
* [[Python Modules - tkinter.filedialog|tkinter.filedialog]]
* [[Python Modules - math|math]]
* [[Python Modules - random|random]]
* [[Python Modules - operator|operator]]
* [[Python Modules - string]]

## 导入(加载)和使用模块

使用 [[Python Statements - import]]

## 模块路径

* 首先在**当前文件夹**中查找模块文件
* 然后从 sys 模块的 path 变量所指定的文件夹中查找模块文件(多个路径)
    * (import sys 后)可用 `sys.path` 查看现有路径
    * 可以使用 `sys.path.append('path')` 方法向 path 变量添加额外的文件夹以扩展搜索路径

## 编写模块

任意 .py 文件都可以作为模块导入, 故可以建立自己的模块库, 并加入系统路径

/@ 阶乘模块

自己编写模块实现阶乘运算

```py
# factorial.py
def fac(num):
    factorial = 1
    if num < 0:
        return -1
    elif num == 0:
        return 1
    else:
        for i in range(1,num + 1):
            factorial = factorial*i
        return factorial
```

之后 `from factorial import fac` 后就能使用 `fac(n)` 计算非负整数 %n% 的阶乘

@/

### `__name__` 属性

- 每个 Python 脚本在运行时都有一个名为 `__name__` 的属性
    - 如果脚本**作为模块**被导入，则其 `__name__` 属性的值被自动设置为**模块名**
    - 如果脚本独立运行，则其 `__name__` 属性值被自动设置为 "\_\_main\_\_"
- 有时候自己编写的模块有校验 test 部分, 加载它的文件运行结果也会带上 test 结果, 故可利用 `__name__` 属性区分它是作为主文件还是作为引用模块

/@ Fibonacci 序列模块

```py
# fibonacci.py
def fib_n(a0,a1,n):
    an_1 = a0
    an = a1
    if n == 0:
    an = a0
    elif n == 1:
    an = a1
    else:
        for i in range(0,n-2):
            x = an+an_1
            an_1 = an
            an = x
    return an

def preTest():
    a0 = 0
    a1 = 1
    n = 10
    print(fib_n(a0,a1,n)==34)

if __name__=='__main__': # 直接运行该文件时才执行
    preTest()
```

[//begin]: # "Autogenerated link references for markdown compatibility"
[Python]: Python "Python"
[Python Statements - import]: Python Statements - import "Python Statements - import"
[//end]: # "Autogenerated link references"
